"use strict";!function(a){a.app=angular.module("waitstaffApp",["ngCookies","ngResource","ngSanitize","ngRoute","ngAnimate"]),a.app.config(function(a){a.when("/",{templateUrl:"views/main.html"}).when("/meal",{templateUrl:"views/meal.html"}).when("/tips",{templateUrl:"views/tips.html"}).otherwise({redirectTo:"/"})}),a.app.controller("NavCtrl",function(a,b){a.isActive=function(a){return a===b.path()}})}(window),window.app.factory("Meals",function(){var a=[];return{add:function(b){a.push(b)},get:function(){return a},getLast:function(){return a[a.length-1]},destroy:function(){a=[]}}}),window.app.factory("subTotal",["tipTotal","tip",function(a,b){return function(a){var c={};return c.subtotal=a.price+a.price*(a.taxPerc/100),c.tip=b(a),c.total=c.subtotal+c.tip,c}}]),window.app.factory("tipTotal",function(){var a=0;return{increase:function(b){a+=b},get:function(){return a},reset:function(){a=0}}}),window.app.factory("tip",function(){return function(a){return a.price*(1+a.taxPerc/100)*(a.tipPerc/100)}}),window.app.controller("MealCtrl",["$scope","Meals","tipTotal","tip",function(a,b,c,d){a.data={},a.submit=function(){a.detailsForm.$valid&&(b.add(a.data),c.increase(d(a.data)),a.cancel())},a.cancel=function(){a.data={}}}]),window.app.controller("ChargesCtrl",["$scope","Meals","subTotal",function(a,b,c){a.$watchCollection(function(){return b.getLast()},function(b){a.meal=c(b)})}]),window.app.controller("EarningsCtrl",["$scope","Meals","tipTotal",function(a,b,c){a.count=b.get().length,a.tipTot=c.get(),a.average=function(){return a.count?a.tipTot/a.count:0},a.reset=function(){b.destroy(),c.reset(),a.count=a.tipTot=0}}]);